{% extends 'bootstrap/base.html' %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}
ResultGames
{% endblock %}

{% block content %}
<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="/">Home</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">

      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('show_all') }}">All Games</a>
      </li>
      
      {% if current_user.is_authenticated %}
      <li class="nav-item">
        <a class="nav-link" href="{{url_for('my_list')}}">My Games <span class="badge badge-primary badge-pill">{{count}}</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{{url_for('recommend') }}">Recommendations</a>
      </li>
      {%endif%}   
      {{ wtf.quick_form(form, extra_classes = "form-inline my-2 my-lg-0") }}
    </ul>

    
    {% if current_user.is_authenticated %}
      <a href="{{url_for('logout')}}" class="btn btn-danger">Logout</a>
    {% else %}
    <a href="{{url_for('login') }}"  class="btn btn-secondary">
      <i class="fa fa-github fa-fw"></i>
      <span>Login</span>
    </a>
    {% endif %}
    
  </div>
</nav>

{% if False %}
<div class="list-group">
  {%for result in results%}
  
  <a href="https://www.metacritic.com{{result.url}}"class="list-group-item list-group-item-action flex-column align-items-start">
    <div class="d-flex w-100 justify-content-between">
      <h5 class="mb-1">{{result.name}}</h5>
      <small class="text-muted">{{result.date}}</small>
    </div>

      <p class="mb-1">Genre: {{result.genre}}</p>
      <p class="mb-1">Metascore: {{result.score}}</p>
      {% if current_user.is_authenticated %}
      <a href="{{url_for('save', name=result.name)}}" class="btn btn-light">Add to My Games</a> 
      {% endif %} 
      {%endfor%}
    </div>        
  </a>
</div>
{% endif %}


{% if False %}
<div class="list-group">
  {% for key, result in results.iterrows() %}
  
  <a href="https://www.metacritic.com{{result['url']}}"class="list-group-item list-group-item-action flex-column align-items-start">
    <div class="d-flex w-100 justify-content-between">
      <h5 class="mb-1">{{result['name']}}</h5>
      <small class="text-muted">{{result['date']}}</small>
    </div>

      <p class="mb-1">Genre: {{result['genre']}}</p>
      <p class="mb-1">Metascore: {{result['score']}}</p>
      {% if current_user.is_authenticated %}
      <a href="{{url_for('save', name=result['name'])}}" class="btn btn-light">Add to My Games</a> 
      {% endif %} 
      {% endfor %}
    </div>        
  </a>
  
</div>
{% endif %}

<div class="accordion" id="accordionExample">
  {% for key, result in results.iterrows() %}
  <div class="card">
    <div class="card-header" id="heading{{key}}">
      <h5 class="mb-0">
        <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapse{{key}}" aria-expanded="false" aria-controls="collapse{{key}}">
          {{result['name']}}
        </button>
      </h5>
    </div>

    <div id="collapse{{key}}" class="collapse show" aria-labelledby="heading{{key}}" data-parent="#accordionExample">
      <div class="card-body">
        {{result['summary']}}
      </div>
    </div>
  </div>
  {% endfor %}
</div>

{% endblock %}
